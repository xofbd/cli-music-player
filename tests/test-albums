#!/usr/bin/env bats

@test "one search term" {
  result=$(build/list-albums --directory tests/music/ "smash" | sort)
  expected="$(< tests/expected/one_search_term_albums)"

  [[ "$result" == "$expected" ]]
}

@test "two search terms" {
  result=$(build/list-albums --directory tests/music/ "smash" "the offspring" | sort)
  expected="$(< tests/expected/two_search_terms_albums)"

  [[ "$result" == "$expected" ]]
}

@test "no search results" {
  result=$(build/list-albums --directory tests/music/ "no results for this" | sort)
  expected="No albums found with pattern"

  [[ "$result" == "$expected" ]]
}

@test "limit results" {
  num_results_all=$(build/list-albums --directory tests/music/ "pumpkins" | wc -l)
  num_results_one=$(build/list-albums --directory tests/music/ --max-results 1 "pumpkins" | wc -l)

  [[ "$num_results_all" -gt 1 ]]
  [[ "$num_results_one" -eq 1 ]]
}

